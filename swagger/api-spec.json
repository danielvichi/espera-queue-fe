{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":""}},"tags":["App"]}},"/client/all":{"get":{"operationId":"ClientController_getAllClients","parameters":[],"responses":{"200":{"description":"List of all clients","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/"}}}}}},"security":[{"AuthGuard":[]}],"tags":["Client"]}},"/client":{"get":{"operationId":"ClientController_getClientById","parameters":[{"name":"clientId","required":true,"in":"query","description":"client","schema":{"type":"string"}}],"responses":{"200":{"description":"Get a client by ID","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Client"]}},"/client/create-and-signin":{"post":{"operationId":"ClientController_createClientAndSignin","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateClientWithAdminDto"}}}},"responses":{"201":{"description":"Create a new Client and its Owner Admin account and create Auth Session","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientDto"}}}}},"tags":["Client"]}},"/admin/create":{"post":{"operationId":"AdminController_createNewNomOwnerAdmin","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatedAdminDto"}}}},"responses":{"201":{"description":"Create a new client Owner Admin account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Admin"]}},"/admin/profile":{"get":{"operationId":"AdminController_getProfile","parameters":[],"responses":{"200":{"description":"Get information for the connected account","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AdminWithClientDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Admin"]}},"/auth/login/admin":{"get":{"operationId":"AuthController_checkAdminCredentials","parameters":[{"name":"Authorization","in":"header","description":"Basic auth header with email and password","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Admin sign-in","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInDto"}}}},"responses":{"200":{"description":"Set an authenticated wrapped in a JWT cookie with the user_token for Admin users"}},"tags":["Auth"]}},"/auth/login/queue-user":{"get":{"operationId":"AuthController_checkQueueUserCredentials","parameters":[{"name":"Authorization","in":"header","description":"Basic auth header with email and password","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Queue User sign-in","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInDto"}}}},"responses":{"200":{"description":"Set an authenticated wrapped in a JWT cookie with the user_token, for Queue Users."}},"tags":["Auth"]}},"/auth/logout":{"get":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"Remove the authenticated user JWT and adds an expired cookie"}},"tags":["Auth"]}},"/unity/create":{"post":{"operationId":"UnityController_createUnity","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUnityDto"}}}},"responses":{"201":{"description":"Create a Unity for the connected user with proper Admin Role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnityDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Unity"]}},"/unity":{"get":{"operationId":"UnityController_getUnitiesById","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputGetUnitiesByIdDto"}}}},"responses":{"200":{"description":"Get Unities by id that belongs to the connected user Client","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UnityDto"}}}}}},"security":[{"AuthGuard":[]}],"tags":["Unity"]}},"/unity/all":{"get":{"operationId":"UnityController_getAllUnities","parameters":[],"responses":{"200":{"description":"Get all Unities for a Client","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UnityDto"}}}}}},"security":[{"AuthGuard":[]}],"tags":["Unity"]}},"/unity/disable":{"patch":{"operationId":"UnityController_disableUnity","parameters":[],"responses":{"200":{"description":"Disable a Enabled Unity for the connected user with proper Admin Role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnityDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Unity"]}},"/unity/enable":{"patch":{"operationId":"UnityController_enableUnity","parameters":[],"responses":{"200":{"description":"Enable a Disabled Unity for the connected user with proper Admin Role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnityDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Unity"]}},"/unity/update":{"patch":{"operationId":"UnityController_updateUnity","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputUpdateUnityDto"}}}},"responses":{"200":{"description":"Update a Unity data for the connected user with proper Admin Role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnityDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Unity"]}},"/queue":{"get":{"operationId":"QueueController_getQueueByIds","parameters":[{"name":"queueIds","required":true,"in":"query","description":"List of Queue Ids to be fetched","schema":{"type":"array","items":{"type":"string"}}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"Retrieve a list of Queue by its Ids","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/QueueDto"}}}}}},"security":[{"AuthGuard":[]}],"tags":["Queue"]}},"/queue/create":{"post":{"operationId":"QueueController_createQueue","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InputCreateQueueDto"}}}},"responses":{"201":{"description":"Create a Queue for the connected user with proper Admin Role","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Queue"]}},"/queue/update":{"patch":{"operationId":"QueueController_updateQueue","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdatedQueueDto"}}}},"responses":{"200":{"description":"Updated a Queue for the connected user with proper Admin Role >= Unity Admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Queue"]}},"/queue/disable":{"patch":{"operationId":"QueueController_disableQueue","parameters":[],"responses":{"200":{"description":"Disable a Queue by its Id for a connected Admin >= Unity Admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Queue"]}},"/queue/enable":{"patch":{"operationId":"QueueController_enable","parameters":[],"responses":{"200":{"description":"Enable a Queue by its Id for a connected Admin >= Unity Admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueDto"}}}}},"security":[{"AuthGuard":[]}],"tags":["Queue"]}},"/queue-user/create-and-signin":{"post":{"operationId":"QueueUserController_createQueueUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateQueueUserDto"}}}},"responses":{"201":{"description":"Create a new Queue User and create Auth Session","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueueUserDto"}}}}},"tags":["Queue-User"]}},"/queue-instance/add-user":{"patch":{"operationId":"QueueInstanceController_addQueueUserToQueueInstance","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddUserToQueueInstanceDto"}}}},"responses":{"200":{"description":"Add user to queue instance","content":{"application/json":{"schema":{"type":"object"}}}}},"security":[{"AuthGuard":[]}],"tags":["Queue-Instance"]}},"/queue-instance/remove-user":{"patch":{"operationId":"QueueInstanceController_removeQueueUserFromQueueInstance","parameters":[],"responses":{"200":{"description":"Remove user from queue instance (only proper admins can remove an userId witch is not the authenticatedUser one)","content":{"application/json":{"schema":{"type":"object"}}}}},"security":[{"AuthGuard":[]}],"tags":["Queue-Instance"]}}},"info":{"title":"BE API","description":"","version":"0.1","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"},"cookie":{"type":"apiKey","in":"cookie","name":"optional-session-id-test"}},"schemas":{"ClientDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the client","example":"c1234567-89ab-cdef-0123-456789abcdef"},"name":{"type":"string","description":"Name of the client","example":"Client A"},"address":{"type":"string","description":"Client Address","example":"Client address in the client format."},"phone":{"type":"string","description":"Client Phone Number","example":"+1-234-567-8900"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the client was created","example":"2023-10-01T12:34:56.789Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the client was last updated","example":"2023-10-15T08:21:45.123Z"}},"required":["id","name","createdAt","updatedAt"]},"CreateClientWithAdminDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the client","example":"Client A"},"cnpj":{"type":"string","description":"Client cnpj","example":"Client document register number"},"address":{"type":"string","description":"Client Address","example":"Client address in the client format."},"phone":{"type":"string","description":"Client Phone Number","example":"+1-234-567-8900"},"ownerId":{"type":"string","description":"Client ownerId account","example":"user1234567890abcdef"}},"required":["name","ownerId"]},"CreatedAdminDto":{"type":"object","properties":{"role":{"type":"string","description":"Role of the admin","example":"CLIENT_OWNER","enum":["CLIENT_OWNER","CLIENT_ADMIN","UNITY_ADMIN","QUEUE_ADMIN"]},"name":{"type":"string","description":"Name of the admin","example":"Admin User"},"email":{"type":"string","description":"Email of the admin","example":"admin@email.com","uniqueItems":true},"passwordHash":{"type":"string","description":"Hashed password of the admin","example":"$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36WQoeG6Lruj3vjPGga31lW"},"clientId":{"type":"string","description":"ID of the client associated with the admin (if applicable)","example":"c1234567-89ab-cdef-0123-456789abcdef","nullable":true},"unityIds":{"description":"List of Unity IDs associated with the admin (if applicable)","example":["u1234567-89ab-cdef-0123-456789abcdef"],"nullable":true,"type":"array","items":{"type":"string"}},"queueIds":{"description":"List of Queue IDs associated with the admin (if applicable)","example":["q1234567-89ab-cdef-0123-456789abcdef"],"nullable":true,"type":"array","items":{"type":"string"}}},"required":["role","name","email","passwordHash"]},"AdminDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the admin","example":"a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6"},"role":{"type":"string","description":"Role of the admin","example":"CLIENT_OWNER","enum":["CLIENT_OWNER","CLIENT_ADMIN","UNITY_ADMIN","QUEUE_ADMIN"]},"name":{"type":"string","description":"Name of the admin","example":"Admin User"},"email":{"type":"string","description":"Email of the admin","example":"admin@email.com","uniqueItems":true},"passwordHash":{"type":"string","description":"Hashed password of the admin","example":"$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36WQoeG6Lruj3vjPGga31lW"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the admin was created","example":"2023-10-01T12:34:56.789Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the admin was last updated","example":"2023-10-15T08:21:45.123Z"},"clientId":{"type":"string","description":"ID of the client associated with the admin (if applicable)","example":"c1234567-89ab-cdef-0123-456789abcdef","nullable":true},"unityIds":{"description":"List of Unity IDs associated with the admin (if applicable)","example":["u1234567-89ab-cdef-0123-456789abcdef"],"nullable":true,"type":"array","items":{"type":"string"}},"queueIds":{"description":"List of Queue IDs associated with the admin (if applicable)","example":["q1234567-89ab-cdef-0123-456789abcdef"],"nullable":true,"type":"array","items":{"type":"string"}},"enabled":{"type":"boolean","description":"Indicates if the admin account is enabled","example":true}},"required":["id","role","name","email","passwordHash","createdAt","updatedAt","enabled"]},"AdminWithClientDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the admin","example":"a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6"},"role":{"type":"string","description":"Role of the admin","example":"CLIENT_OWNER","enum":["CLIENT_OWNER","CLIENT_ADMIN","UNITY_ADMIN","QUEUE_ADMIN"]},"name":{"type":"string","description":"Name of the admin","example":"Admin User"},"email":{"type":"string","description":"Email of the admin","example":"admin@email.com","uniqueItems":true},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the admin was created","example":"2023-10-01T12:34:56.789Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the admin was last updated","example":"2023-10-15T08:21:45.123Z"},"clientId":{"type":"string","description":"ID of the client associated with the admin (if applicable)","example":"c1234567-89ab-cdef-0123-456789abcdef","nullable":true},"unityIds":{"description":"List of Unity IDs associated with the admin (if applicable)","example":["u1234567-89ab-cdef-0123-456789abcdef"],"nullable":true,"type":"array","items":{"type":"string"}},"queueIds":{"description":"List of Queue IDs associated with the admin (if applicable)","example":["q1234567-89ab-cdef-0123-456789abcdef"],"nullable":true,"type":"array","items":{"type":"string"}},"enabled":{"type":"boolean","description":"Indicates if the admin account is enabled","example":true}},"required":["id","role","name","email","createdAt","updatedAt","enabled"]},"SignInDto":{"type":"object","properties":{"email":{"type":"string","description":"Email of the admin","example":"user@email.com","uniqueItems":true},"passwordHash":{"type":"string","description":"Hashed password of the admin","example":"$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36WQoeG6Lruj3vjPGga31lW"}},"required":["email","passwordHash"]},"CreateUnityDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the Unity","example":"Unity A"},"address":{"type":"string","description":"Unity Address","example":"Unity address in the Unity format."},"phone":{"type":"string","description":"Unity Phone Number","example":"+1-234-567-8900"},"clientId":{"type":"string","description":"Id of the Unity it belongs to","example":"c1234567-89ab-cdef-0123-456789abcdef"}},"required":["name","clientId"]},"UnityDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the Unity","example":"c1234567-89ab-cdef-0123-456789abcdef"},"name":{"type":"string","description":"Name of the Unity","example":"Unity A"},"address":{"type":"string","description":"Unity Address","example":"Unity address in the client format."},"phone":{"type":"string","description":"Unity Phone Number","example":"+1-234-567-8900"},"email":{"type":"string","description":"Unity email","example":"unity@email.com"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the Unity was created","example":"2023-10-01T12:34:56.789Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the Unity was last updated","example":"2023-10-15T08:21:45.123Z"},"clientId":{"type":"string","description":"Id of the Client this Unity belongs to","example":"c1234567-89ab-cdef-0123-456789abcdef"},"enabled":{"type":"boolean","description":"Status of the unity","example":"true"}},"required":["id","name","createdAt","updatedAt","clientId","enabled"]},"InputGetUnitiesByIdDto":{"type":"object","properties":{}},"InputUpdateUnityDto":{"type":"object","properties":{}},"QueueDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for Queue","example":"c1234567-89ab-cdef-0123-456789abcdef"},"name":{"type":"object","description":"Name of the Queue","example":"Unity A"},"type":{"type":"string","description":"Queue type","example":"APPOINTMENT","enum":["GENERAL","APPOINTMENT","SERVICE","EVENT","PRIORITY","OTHER"]},"minWaitingTimeInMinutes":{"type":"object","description":"Average minimum waiting time in minutes","example":"10"},"maxWaitingTimeInMinutes":{"type":"object","description":"Average maximum waiting time in minutes","example":"30"},"currentWaitingTimeInMinutes":{"type":"object","description":"Last user waiting time in minutes","example":"15"},"isActive":{"type":"boolean","description":"Is queue already operating","example":"true"},"startQueueAt":{"type":"object","description":"Timestamp when the queue starts operating","example":"19:00"},"endQueueAt":{"type":"object","description":"Timestamp when the queue starts operating","example":"23:00"},"maxUsersInQueue":{"type":"object","description":"Max number of users allowed in the queue","example":"15"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the queue was created","example":"2023-10-01T12:34:56.789Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the queue was last updated","example":"2023-10-15T08:21:45.123Z"},"enabled":{"type":"boolean","description":"Indicates if the queue is deactivated","example":true},"clientId":{"type":"string","description":"ID of the Client associated with the queue","example":"c1234567-89ab-cdef-0123-456789abcdef"},"unityId":{"type":"string","description":"ID of the Unity associated with the queue","example":"c1234567-89ab-cdef-0123-456789abcdef"},"adminId":{"type":"object","description":"ID of the exclusive Admin associated with the queue","example":"c1234567-89ab-cdef-0123-456789abcdef","nullable":true}},"required":["id","type","maxWaitingTimeInMinutes","isActive","createdAt","updatedAt","enabled","clientId","unityId"]},"InputCreateQueueDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the Queue","example":"Unity A"},"type":{"type":"string","description":"Queue type","example":"APPOINTMENT","enum":["GENERAL","APPOINTMENT","SERVICE","EVENT","PRIORITY","OTHER"]},"startQueueAt":{"type":"string","description":"Timestamp when the queue starts operating","example":"19:00"},"endQueueAt":{"type":"string","description":"Timestamp when the queue starts operating","example":"23:00"},"maxUsersInQueue":{"type":"number","description":"Max number of users allowed in the queue","example":"15"},"unityId":{"type":"string","description":"ID of the Unity associated with the queue","example":"c1234567-89ab-cdef-0123-456789abcdef"},"adminId":{"type":"string","description":"ID of the exclusive Admin associated with the queue","example":"c1234567-89ab-cdef-0123-456789abcdef","nullable":true}},"required":["type","unityId"]},"UpdatedQueueDto":{"type":"object","properties":{"queueId":{"type":"string","description":"Queue Id","example":"c1234567-89ab-cdef-0123-456789abcdef"},"payload":{"type":"object","description":"Payload to be updated"}},"required":["queueId","payload"]},"CreateQueueUserDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of the User Queue","example":"John Doe"},"email":{"type":"string","description":"Email of the User Queue","example":"john_doe@email.com"},"passwordHash":{"type":"string","description":"Hashed password of the User Queue","example":"$2b$10$EixZaYVK1fsbw1ZfbX3OXePaWxn96p36WQoeG6Lruj3vjPGga31lW"}},"required":["passwordHash"]},"QueueUserDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for User Queue","example":"c1234567-89ab-cdef-0123-456789abcdef"},"name":{"type":"string","description":"Name of the User Queue","example":"John Doe"},"email":{"type":"string","description":"Email of the User Queue","example":"john_doe@email.com"},"createdAt":{"format":"date-time","type":"string","description":"Timestamp when the User Queue was created","example":"2023-10-01T12:34:56.789Z"},"updatedAt":{"format":"date-time","type":"string","description":"Timestamp when the User Queue was last updated","example":"2023-10-15T08:21:45.123Z"},"enabled":{"type":"boolean","description":"Indicates if the User Queue is deactivated","example":true}},"required":["id","createdAt","updatedAt","enabled"]},"AddUserToQueueInstanceDto":{"type":"object","properties":{"queueId":{"type":"string","description":"Unique identifier for Queue Reference","example":"c1234567-89ab-cdef-0123-456789abcdef"},"queueInstanceId":{"type":"string","description":"Unique identifier for Queue Instance","example":"c1234567-89ab-cdef-0123-456789abcdef"}},"required":["queueId"]}}}}